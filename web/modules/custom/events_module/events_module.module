<?php

/**
 * Implements hook_theme().
 */
function events_module_theme() {
  return [
    'views_view_unformatted__events__page_1' => [
      'template' => 'views-view-unformatted--events--page-1',
      'base hook' => 'view'
    ],
    'views_view_unformatted__frontpage__page_1' => [
      'template' => 'views-view-unformatted--frontpage--page-1',
      'base hook' => 'view'
    ],
    'views_view__frontpage__page_1' => [
      'template' => 'views-view--frontpage--page-1',
      'base hook' => 'view'
    ],
  ];
}

function events_module_preprocess_views_view_unformatted(&$variables) {

    $route_name = \Drupal::routeMatch()->getRouteName();

    if($route_name == 'view.events.page_1' || $route_name == "view.frontpage.page_1")
    {
        $variables['#attached']['library'][] = 'events_module/custom';
    }
}

function events_module_preprocess_views_view(&$variables) {

    if ($variables['id'] == 'frontpage')
    {
        $home_events_text = \Drupal::config('events_module.settings')->get('home_events_text');
        $variables['home_events_text'] = $home_events_text;
    }

    if ($variables['id'] == 'events')
    {
        $events_no_results_text = \Drupal::config('events_module.settings')->get('events_no_results_text');
        $variables['empty'] = $events_no_results_text;
    }
}